<!DOCTYPE HTML>

<html class="ui-fullpage">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type='text/javascript' src='../xjslib/xjs-base.js'></script>
<link rel="icon" href="video-64.png"/>

<script src="./video.min.js"></script>
<!-- 
<script src="../jslib/videojs-flash/2.1.1/videojs-flash.js"></script>
<link href="../jslib/videojs/7.1.0/video-js.css" rel="stylesheet">
-->
<title>视频播放(Flash)</title>
<script type="text/javascript">
  // http://localhost:8000/snsoft/demo/VideoPlay.html
  var consolePane ; 
   var videoPlayer;
   function consoleLog(s)
   {
	   consolePane.addMessage(s);
   }
  function onVideoPlayReady(){
	  window.console.log("onVideoPlayReady...");
	  consoleLog("onVideoPlayReady...");
	  videoPlayer.on("play",onVideoPlay);
	  videoPlayer.on("resize",onVideoResize);
	  // waiting, playing,
	  videoPlayer.on("error",onVideoError);
	  window.console.log("videoPlayer.src = "+videoPlayer.src());
	  if( videoPlayer.src() )
			videoPlayer.play();
  };
  function onVideoPlay(ev){
	  consoleLog("onVideoPlay...: Video大小="+videoPlayer.videoWidth()+"x"+videoPlayer.videoHeight()); 
	 // window.console.log("onVideoPlay...: Video大小="+videoPlayer.videoWidth()+"x"+videoHeight());
	 // alert(videoPlayer.videoWidth()+"x"+videoHeight());
  };
  function onVideoResize(ev){
	  window.console.log("onVideoResize...");
  };
  function onVideoError(ev){
	  alert("onVideoError");
  };
  function startVideoPlay(){
	  document.getElementById("ErrInfo").textContent = ""; 
	  consolePane.clear();// DOM.remove(consoleDOM); 
	  var url = document.getElementById("VideoURL").value.trim();
	  console.log("url=%s",url);
	  videoPlayer.pause();
	  videoPlayer.src(url);
	  videoPlayer.play();
	  setTimeout(function(){videoPlayer.play();},200);
	  setTimeout(function(){videoPlayer.play();},1000);
  };
  function stopVideoPlay(){
	  videoPlayer.pause();
  };
   window.onload = function(){
	   consolePane = new Xjs.ui.MessagePane({dom:document.getElementById("Console")});
	   videojs.options.flash.swf = Xjs.ROOTPATH+"jslib/videojs-swf/5.4.1/video-js.swf";  
	   videoPlayer = window.videojs("video-player",
			   {},//"swf":Xjs.ROOTPATH+"jslib/videojs-swf/5.4.1/video-js.swf"},
			   onVideoPlayReady);
	   videoPlayer.onresize 
	   document.getElementById("VideoPlayBtn").onclick = startVideoPlay;
	   document.getElementById("VideoStopBtn").onclick = stopVideoPlay;
  };
  
</script>
<style type="text/css">
#ErrInfo { color:red;}
</style>
</head>

<body>

 <h4>HLS等播放视频 </h4>
视频地址:<br>
<textarea id="VideoURL" style="width:1000px;height:50px;border:1px solid blue;"></textarea> <br> 
 <button id="VideoPlayBtn">播放</button><button id="VideoStopBtn">停止</button><br>
 <div>
 http://localhost:8000/snsoft/touch-demos/oceans.mp4<br>
 http://localhost/live/test1.flv<br>
 http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8<br>
 </div>
 <div id="ErrInfo"></div>
 <div id="Console"></div>
 <!--
   autoplay   loop
   width height
  -->
 <video
    id="video-player"
    class="video-js"
    controls
    preload="auto"
    poster="../video/oceans.png"
    
    >
       <!-- 
       <source  type='video/x-flv'/>
       <source  type='rtmp/flv'/>
	<source  type="video/mp4">
  	<source  type="video/ogg">
  	<source type="application/x-mpegURL">
  	  -->
</video>
</body>
</html>